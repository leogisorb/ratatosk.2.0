/* ============================================
   DialogBase.css (NEU)
   Importiert BaseLayout + Dialog-Ergänzungen
   ============================================ */

/* Import der zentralen Layout-Definitionen */
@import './BaseLayout.css';

/* === DIALOG CONTAINER === */
.pain-dialog,
.self-dialog,
.environment-dialog,
.settings-dialog {
  height: 100vh;
  max-height: 100vh;
  width: 100vw;
  max-width: 100vw;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  background-color: var(--color-bg-primary);
}

/* === MAIN TITLE (Dialog-spezifisch) === */
.pain-dialog .main-title,
.self-dialog .main-title,
.environment-dialog .main-title,
.settings-dialog .main-title {
  /* 30% größere Schrift */
  font-size: clamp(1.95rem, 5.2vw, 3.25rem); /* 30% größer als BaseLayout */
  
  /* Über Kacheln legen */
  position: relative;
  z-index: 100;
  
  /* Weißer Hintergrund mit Fade nach unten */
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 1) 0%,
    rgba(255, 255, 255, 1) 70%,
    rgba(255, 255, 255, 0.9) 85%,
    rgba(255, 255, 255, 0.7) 95%,
    rgba(255, 255, 255, 0) 100%
  );
  
  /* Padding für bessere Lesbarkeit */
  padding: var(--space-md) var(--space-lg);
  padding-bottom: var(--space-xl);
  margin: 0;
  margin-bottom: var(--space-md);
  
  /* Volle Breite */
  width: 100%;
  box-sizing: border-box;
  
  /* Text bleibt sichtbar */
  color: var(--color-text-primary);
  text-align: center;
  font-weight: 500;
  line-height: 1.2;
}

/* Dark Mode Anpassung für main-title */
.dark .pain-dialog .main-title,
.dark .self-dialog .main-title,
.dark .environment-dialog .main-title,
.dark .settings-dialog .main-title {
  background: linear-gradient(
    to bottom,
    rgba(31, 41, 55, 1) 0%, /* --color-bg-primary im Dark Mode */
    rgba(31, 41, 55, 1) 70%,
    rgba(31, 41, 55, 0.9) 85%,
    rgba(31, 41, 55, 0.7) 95%,
    rgba(31, 41, 55, 0) 100%
  );
  color: #f9fafb;
}

/* Mobile: Mehr Padding und stärkerer Fade */
@media (max-width: 1024px) and (orientation: portrait) {
  /* Content-wrapper: Kein Padding/Margin oben für Dialoge */
  .pain-dialog .content-wrapper,
  .self-dialog .content-wrapper,
  .environment-dialog .content-wrapper,
  .settings-dialog .content-wrapper {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  /* Main-content: Kein Margin oben */
  .pain-dialog .main-content,
  .self-dialog .main-content,
  .environment-dialog .main-content,
  .settings-dialog .main-content {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  .pain-dialog .main-title,
  .self-dialog .main-title,
  .environment-dialog .main-title,
  .settings-dialog .main-title {
    font-size: clamp(1.95rem, 7.8vw, 3.25rem); /* 30% größer */
    padding: 0 var(--space-md); /* Kein Padding oben/unten, nur seitlich */
    padding-top: 0 !important; /* Garantiert kein Padding oben */
    padding-bottom: 0; /* Kein Padding unten */
    margin-top: 0 !important; /* Kein Margin oben - direkt unter Header */
    margin-bottom: 0; /* Kein Margin unten */
    line-height: 1.1; /* Kompaktere Zeilenhöhe */
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 1) 0%,
      rgba(255, 255, 255, 1) 60%,
      rgba(255, 255, 255, 0.85) 75%,
      rgba(255, 255, 255, 0.6) 90%,
      rgba(255, 255, 255, 0) 100%
    );
  }
  
  .dark .pain-dialog .main-title,
  .dark .self-dialog .main-title,
  .dark .environment-dialog .main-title,
  .dark .settings-dialog .main-title {
    background: linear-gradient(
      to bottom,
      rgba(31, 41, 55, 1) 0%,
      rgba(31, 41, 55, 1) 60%,
      rgba(31, 41, 55, 0.85) 75%,
      rgba(31, 41, 55, 0.6) 90%,
      rgba(31, 41, 55, 0) 100%
    );
  }
}

/* Mobile Portrait (bis 880px): Gleiche Anpassungen */
@media (max-width: 880px) and (orientation: portrait) {
  /* Content-wrapper: Kein Padding/Margin oben für Dialoge */
  .pain-dialog .content-wrapper,
  .self-dialog .content-wrapper,
  .environment-dialog .content-wrapper,
  .settings-dialog .content-wrapper {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  /* Main-content: Kein Margin oben */
  .pain-dialog .main-content,
  .self-dialog .main-content,
  .environment-dialog .main-content,
  .settings-dialog .main-content {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  .pain-dialog .main-title,
  .self-dialog .main-title,
  .environment-dialog .main-title,
  .settings-dialog .main-title {
    margin-top: 0 !important; /* Kein Margin oben - direkt unter Header */
    padding-top: 0 !important; /* Garantiert kein Padding oben */
    line-height: 1.1; /* Kompaktere Zeilenhöhe */
  }
}

/* Medium & Large Tablet Portrait (881px-1366px): Grid Layout */
@media (min-width: 881px) and (max-width: 1366px) and (orientation: portrait) {
  /* Content-wrapper: Kein Padding/Margin oben für Dialoge */
  .pain-dialog .content-wrapper,
  .self-dialog .content-wrapper,
  .environment-dialog .content-wrapper,
  .settings-dialog .content-wrapper {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  /* Main-content: Kein Margin oben */
  .pain-dialog .main-content,
  .self-dialog .main-content,
  .environment-dialog .main-content,
  .settings-dialog .main-content {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  .pain-dialog .main-title,
  .self-dialog .main-title,
  .environment-dialog .main-title,
  .settings-dialog .main-title {
    margin-top: 0 !important; /* Kein Margin oben - direkt unter Header */
    padding-top: var(--space-xs); /* Minimales Padding für Grid-Layout */
    line-height: 1.2; /* Normale Zeilenhöhe für Grid */
  }
}

/* === HORIZONTALES KARUSSELL (für SubViews) === */
.carousel-wrapper {
  display: none; /* Wird aktiviert wenn vorhanden */
  flex-direction: column; /* Container und Indikatoren untereinander */
  justify-content: space-between; /* h1 oben, Indikatoren unten, Karussell mittig */
  align-items: center;
  width: 100%;
  position: relative;
  margin: 0; /* Kein Margin oben */
  padding: 0; /* Kein Padding */
  flex: 1; /* Nimmt verfügbaren Platz */
}

/* Sicherstellen, dass main-title bei SubViews (inkl. Pain Scale) im main-content bleibt */
.pain-dialog .content-wrapper:has(.carousel-wrapper) .main-title {
  position: relative !important;
  z-index: 1 !important; /* Unter Header, aber über Karussell */
  margin-top: 0 !important;
  padding-top: var(--space-sm) !important; /* Minimales Padding für Abstand zum Header */
  margin-bottom: var(--space-sm) !important; /* Abstand zum Karussell */
}

/* Sicherstellen, dass content-wrapper bei Pain Scale View korrekt positioniert ist */
.pain-dialog .content-wrapper:has(.carousel-wrapper) {
  padding-top: 0 !important;
  margin-top: 0 !important;
  overflow: visible !important;
}

.carousel-wrapper .carousel-container {
  position: relative;
  width: 90vw;
  max-width: 100%;
  margin: 0 auto;
  padding: 0; /* Kein Padding oben/unten */
  display: flex;
  align-items: center;
  justify-content: center;
  transform-style: preserve-3d;
  perspective: 200vh;
  overflow: visible;
  height: clamp(30vh, 45vh, 50vh); /* Etwas höher für bessere Sichtbarkeit */
  flex: 1; /* Nimmt verfügbaren Platz zwischen h1 und Indikatoren */
  margin: auto 0; /* Zentriert vertikal */
}

/* Horizontal Carousel Items - Animation wie vertikales Karussell */
.carousel-wrapper .carousel-item {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: center center;
  
  /* Dynamic positioning based on offset - wie vertikales Karussell */
  --offset-value: var(--offset, 0);
  --distance: calc(var(--offset-value) * 35vw); /* Horizontal statt vertikal */
  --scale: calc(1 - abs(var(--offset-value)) * 0.15); /* Gleiche Skalierung */
  --opacity: calc(1 - abs(var(--offset-value)) * 0.4); /* Gleiche Opacity */
  
  transform: translate(-50%, -50%) 
              translateX(var(--distance))
              scale(var(--scale));
  opacity: var(--opacity);
  pointer-events: none;
  
  /* Gleiche Transition wie vertikales Karussell */
  transition: transform var(--transition-smooth), 
              opacity var(--transition-smooth);
  will-change: transform, opacity;
  z-index: calc(10 - abs(var(--offset-value)) * 2); /* Gleiche z-index Logik */
  
  backface-visibility: hidden;
  width: clamp(25vw, 30vw, 35vw);
  height: clamp(30vh, 40vh, 50vh);
  cursor: pointer;
}

/* Zeige mehr Karten für flüssigen Flow (von -2 bis +2) - wie vertikales Karussell */
.carousel-wrapper .carousel-item[style*="--offset: -2"],
.carousel-wrapper .carousel-item[style*="--offset: -1"],
.carousel-wrapper .carousel-item[style*="--offset: 0"],
.carousel-wrapper .carousel-item[style*="--offset: 1"],
.carousel-wrapper .carousel-item[style*="--offset: 2"] {
  opacity: var(--opacity);
  pointer-events: auto;
}

/* Active item - zentriert und hervorgehoben */
.carousel-wrapper .carousel-item[style*="--offset: 0"] {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
  z-index: 10;
  pointer-events: auto;
}

/* === CAROUSEL INDICATORS (für horizontales Karussell) === */
.carousel-wrapper .carousel-indicators {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.75rem;
  margin: 0; /* Kein Margin, wird durch space-between positioniert */
  margin-bottom: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  position: relative;
  z-index: 50;
  width: 100%;
  flex-shrink: 0; /* Behält feste Größe */
}

.carousel-indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 2px solid var(--color-border-primary);
  background: var(--color-bg-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  opacity: 0.6;
  padding: 0;
  margin: 0;
}

.carousel-indicator:hover {
  border-color: var(--color-primary);
  transform: scale(1.2);
  opacity: 0.8;
}

.carousel-indicator-active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  transform: scale(1.3);
  box-shadow: 0 0 12px rgba(0, 176, 152, 0.5);
  opacity: 1;
}

/* Dark Mode für Indikatoren */
.dark .carousel-indicator {
  border-color: var(--color-border-primary);
  background: var(--color-bg-secondary);
}

.dark .carousel-indicator-active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  box-shadow: 0 0 12px rgba(0, 176, 152, 0.6);
}

/* SubView Detection - wenn carousel-wrapper existiert */
.content-wrapper:has(.carousel-wrapper) .desktop-grid,
.content-wrapper:has(.carousel-wrapper) .mobile-carousel {
  display: none !important;
}

.content-wrapper:has(.carousel-wrapper) .carousel-wrapper {
  display: flex !important;
}

/* === EMOJI STYLES (für SubViews) === */
.tile-emoji {
  font-size: clamp(3rem, 10vw, 6rem);
  line-height: 1;
}

@media (max-width: 768px) {
  .tile-emoji {
    font-size: clamp(2.5rem, 8vw, 4rem);
  }
}

/* === CONFIRMATION VIEW STYLES === */
.confirmation-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 2rem;
  text-align: center;
  animation: fadeInScale 0.5s ease-out;
  gap: 0.5rem; /* Reduzierter Abstand zwischen Elementen */
}

.confirmation-icon {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-size: 4rem;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1rem; /* Reduziert von 2rem */
  box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
  animation: pulse 2s ease-in-out infinite;
}

.confirmation-title {
  font-family: var(--font-family);
  font-size: clamp(2rem, 8vw, 4rem);
  font-weight: 450;
  color: var(--color-text-primary);
  margin: 0; /* Kein Margin mehr */
  text-align: center;
}

.confirmation-text {
  font-family: var(--font-family);
  font-size: clamp(1.5rem, 6vw, 3rem);
  font-weight: 450;
  color: #FF6B35;
  margin: 0; /* Kein Margin mehr */
  text-align: center;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

/* Mobile Responsiveness für Confirmation */
@media (max-width: 768px) {
  .confirmation-icon {
    width: 80px;
    height: 80px;
    font-size: 2.5rem;
    margin-bottom: 0.5rem; /* Noch weniger Abstand auf Mobile */
  }
  
  .confirmation-container {
    padding: 1rem 1rem; /* Reduziertes Padding */
    gap: 0.25rem; /* Sehr kleiner Abstand zwischen Elementen */
  }
  
  .confirmation-title {
    margin: 0;
  }
  
  .confirmation-text {
    margin: 0;
  }
}

/* Portrait-Orientierung: Texte noch näher zusammen */
@media (orientation: portrait) and (max-width: 1024px) {
  .confirmation-container {
    padding: 1.5rem 1rem; /* Weniger Padding in Portrait */
    gap: 0.5rem; /* Kleiner Abstand */
    justify-content: center; /* Zentriert vertikal */
  }
  
  .confirmation-icon {
    margin-bottom: 0.75rem; /* Reduzierter Abstand */
  }
  
  .confirmation-title {
    margin: 0;
    font-size: clamp(1.5rem, 6vw, 2.5rem); /* Etwas kleiner */
  }
  
  .confirmation-text {
    margin: 0;
    font-size: clamp(1.2rem, 5vw, 2rem); /* Etwas kleiner */
  }
}